<!DOCTYPE html>
<html lang="en-US" xmlns:th="http://www.thymeleaf.org">
<head>
    <object th:include="fragments/head :: head" th:remove="tag"></object>
    <title>Enter Paymennt Info</title>
    
    <script th:inline='javascript'>
        //get this from the controller
        var secretKey = /*[[${paymentResponse.clientSecret}]]*/ 'Secret Key';       
    </script>
    
    <script src="https://js.stripe.com/v3/"></script>
    <script src="/js/client.js" defer></script>
</head>

<body>
    <h1>Enter Payment Info</h1>
    <div class="total-amount-section">
        Total Order Value: $<span th:text="${totalAmount}"></span>
    </div>
    <form id="payment-form">
      <div id="card-element"><!--Stripe.js injects the Card Element--></div>
      <button id="submit">
        <div class="spinner hidden" id="spinner"></div>
        <span id="button-text">Pay</span>
      </button>
      <p id="card-error" role="alert"></p>
      <p class="result-message hidden">
        Payment succeeded, see the result in your
        <a href="" target="_blank">Stripe dashboard.</a> Refresh the page to pay again.
      </p>
    </form>
</body>
</html>